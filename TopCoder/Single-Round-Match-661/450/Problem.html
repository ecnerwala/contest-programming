<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>
Bob is going to create a graph with <b>N</b> nodes.
The graph will be constructed in two steps.
First, Bob will take <b>N</b> isolated vertices, label them 1 through <b>N</b> and color each of them using one of <b>K</b> colors.
Then, Bob will add some directed edges to the graph.
For each i between 2 and <b>N</b>, inclusive, Bob may choose a single value j &lt; i such that the nodes i and j have different colors. If he does, he will add the edge from i to j to his graph.
Note that Bob may choose not to add any edge from node i, even if there are some valid choices of j.
</p>

<p>
Two graphs are considered the same if they have the same node colors and the same set of edges.
</p>

<p>
You are given the long longs <b>N</b> and <b>K</b>.
You are also given an int <b>M</b>.
Compute and return the number of different graphs Bob may construct, modulo <b>M</b>.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>ColorfulLineGraphs</td></tr><tr><td>Method:</td><td>countWays</td></tr><tr><td>Parameters:</td><td>long long, long long, int</td></tr><tr><td>Returns:</td><td>int</td></tr><tr><td>Method signature:</td><td>int countWays(long long N, long long K, int M)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>N</b> will be between 1 and 1,000,000,000,000 (10^12), inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>K</b> will be between 1 and 1,000,000,000,000 (10^12), inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>M</b> will be between 2 and 1,000,000 (10^6), inclusive. </td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>3</pre></td></tr><tr><td><pre>2</pre></td></tr><tr><td><pre>100000</pre></td></tr></table></td></tr><tr><td><pre>Returns: 24</pre></td></tr><tr><td><table><tr><td colspan="2"><p>
The 24 different graphs are shown below. In each picture, the vertices have labels 1, 2, 3 from the left to the right.
</p>

<img src="http://www.topcoder.com/contest/problem/ColorfulLineGraphs/Pic.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>15</pre></td></tr><tr><td><pre>3</pre></td></tr><tr><td><pre>1000000</pre></td></tr></table></td></tr><tr><td><pre>Returns: 510625</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>100000</pre></td></tr><tr><td><pre>100000</pre></td></tr><tr><td><pre>999999</pre></td></tr></table></td></tr><tr><td><pre>Returns: 185185</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>1000000000000</pre></td></tr><tr><td><pre>6</pre></td></tr><tr><td><pre>1000000</pre></td></tr></table></td></tr><tr><td><pre>Returns: 109376</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>5000</pre></td></tr><tr><td><pre>1000000000000</pre></td></tr><tr><td><pre>314159</pre></td></tr></table></td></tr><tr><td><pre>Returns: 202996</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>